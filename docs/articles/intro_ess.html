<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to the ess package • ess</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to the ess package">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">ess</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/intro_ess.html">Introduction to the ess package</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/cimentadaj/ess">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Introduction to the ess package</h1>
                        <h4 class="author">Jorge Cimentada</h4>
            
            <h4 class="date">2018-03-20</h4>
      
      <small>Source: <a href="https:/github.com/cimentadaj/ess/blob/master/vignettes/intro_ess.Rmd"><code>vignettes/intro_ess.Rmd</code></a></small>

    </div>

    
    
<div class="contents">
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>Using the <code>ess</code> package is fairly easy. There are are two main families of functions: <code>ess_*</code> and <code>show_*</code>. They each complement each other and allow the user to almost never have to go to the European Social Survey (ESS) website. The only scenario where you need to enter the ESS website is to validate your email. If you haven’t registered, create an account at <a href="http://www.europeansocialsurvey.org/user/new" class="uri">http://www.europeansocialsurvey.org/user/new</a></p>
<p>Once you register visit your email account to validate the account and you’re ready to access the data.</p>
<p>Given that some <code>ess</code> functions require your email address, this vignette will use a fake email but everything should work accordingly if you registered with the ESS.</p>
</div>
<div id="downloading-country-specific-rounds" class="section level2">
<h2 class="hasAnchor">
<a href="#downloading-country-specific-rounds" class="anchor"></a>Downloading country specific rounds</h2>
<p>To install and load development version of the package use:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">"devtools"</span>)
devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"cimentadaj/ess"</span>)

<span class="kw">library</span>(ess)</code></pre></div>
<p>to install the stable version from CRAN use:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">"ess"</span>)</code></pre></div>
<p>Let’s suppose you don’t know which countries or rounds are available for the ESS. Then the <code>show_*</code> family of functions is your friend.</p>
<p>To find out which countries have participated you can use <code><a href="../reference/show_countries.html">show_countries()</a></code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/show_countries.html">show_countries</a></span>()</code></pre></div>
<pre><code>##  [1] "Albania"            "Austria"            "Belgium"           
##  [4] "Bulgaria"           "Croatia"            "Cyprus"            
##  [7] "Czech Republic"     "Denmark"            "Estonia"           
## [10] "Finland"            "France"             "Germany"           
## [13] "Greece"             "Hungary"            "Iceland"           
## [16] "Ireland"            "Israel"             "Italy"             
## [19] "Kosovo"             "Latvia"             "Lithuania"         
## [22] "Luxembourg"         "Netherlands"        "Norway"            
## [25] "Poland"             "Portugal"           "Romania"           
## [28] "Russian Federation" "Slovakia"           "Slovenia"          
## [31] "Spain"              "Sweden"             "Switzerland"       
## [34] "Turkey"             "Ukraine"            "United Kingdom"</code></pre>
<p>This function actually looks up the countries in the ESS website. If new countries enter, this will automatically grab those countries as well. Let’s checkout Turkey. How many rounds has Turkey participated in? We can use <code><a href="../reference/show_country_rounds.html">show_country_rounds()</a></code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tk_rnds &lt;-<span class="st"> </span><span class="kw"><a href="../reference/show_country_rounds.html">show_country_rounds</a></span>(<span class="st">"Turkey"</span>)
tk_rnds</code></pre></div>
<pre><code>## [1] 2 4</code></pre>
<p>Note that country names are case sensitive. Use the exact name printed out by <code><a href="../reference/show_countries.html">show_countries()</a></code></p>
<p>Using this information, we can download those specific rounds easily with <code>ess_country</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">turkey &lt;-
<span class="st">  </span><span class="kw"><a href="../reference/ess_country.html">ess_country</a></span>(
    <span class="dt">country =</span> <span class="st">"Turkey"</span>,
    <span class="dt">rounds =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">4</span>),
    <span class="dt">your_email =</span> <span class="st">"your_email@random.com"</span>
    )</code></pre></div>
<p><code>turkey</code> will now be a list of <code>length(rounds)</code> containing a data frame for each round. If you only specified one round, then all <code>ess_*</code> functions return a data frame. ess_country<code>is useful for when you want to download specific rounds, but not all. To download all rounds for a country automatically you can use</code>ess_all_cntrounds`.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/ess_all_cntrounds.html">ess_all_cntrounds</a></span>(<span class="st">"Turkey"</span>, <span class="st">"your_email@random.com"</span>)</code></pre></div>
<p>The <code>ess_*</code> family is concerned with downloading the data and thus always returns a list containing data frames. Conversely, the <code>show_*</code> family grabs information from the ESS website and always returns vectors.</p>
</div>
<div id="download-complete-rounds" class="section level2">
<h2 class="hasAnchor">
<a href="#download-complete-rounds" class="anchor"></a>Download complete rounds</h2>
<p>Similarly, we can use other functions to download rounds. To see which rounds are currently available, use <code>show_rounds</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/show_rounds.html">show_rounds</a></span>()</code></pre></div>
<pre><code>## [1] 1 2 3 4 5 6 7 8</code></pre>
<p>Similar to <code>show_countries</code>, <code>show_rounds</code> interactively looks up rounds in the ESS website, so any future rounds will automatically be included.</p>
<p>To download all available rounds, use <code>ess_all_rounds</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">all_rounds &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ess_all_rounds.html">ess_all_rounds</a></span>(<span class="st">"your_email@random.com"</span>)</code></pre></div>
<p>Alternatively, use <code>ess_rounds</code> for selected ones.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">selected_rounds &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ess_rounds.html">ess_rounds</a></span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">6</span>), <span class="st">"your_email@random.com"</span>)</code></pre></div>
</div>
<div id="downloading-data-for-stata-spss-and-sas-users" class="section level2">
<h2 class="hasAnchor">
<a href="#downloading-data-for-stata-spss-and-sas-users" class="anchor"></a>Downloading data for Stata, SPSS and SAS users</h2>
<p>All <code>ess_*</code> functions allow the user to save the datasets in a specified folder in <code>'stata'</code>, <code>'spss'</code> or <code>'sas'</code> formats.</p>
<p>For example, to save round two from Turkey in a folder called <code>./my_folder</code>, we use:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/ess_country.html">ess_country</a></span>(<span class="st">"Turkey"</span>, <span class="dv">2</span>,
            <span class="st">"your_email@random.com"</span>,
            <span class="dt">only_download =</span> <span class="ot">TRUE</span>,
            <span class="dt">output_dir =</span> <span class="st">"./myfolder/"</span>)</code></pre></div>
<p>By default it saves the data as <code>'stata'</code> files. Alternatively you can use <code>'spss'</code> or <code>'sas'</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/ess_country.html">ess_country</a></span>(<span class="st">"Turkey"</span>, <span class="dv">2</span>,
            <span class="st">"your_email@random.com"</span>,
            <span class="dt">only_download =</span> <span class="ot">TRUE</span>,
            <span class="dt">output_dir =</span> <span class="st">"./myfolder/"</span>,
            <span class="dt">format =</span> <span class="st">'sas'</span>)</code></pre></div>
<p>This will save the data to <code>./myfolder/ESS_Turkey</code> and inside that folder there will be the <code>ESS2</code> folder that contains the data. If you specify <code>only_download = TRUE</code>, but don’t specify a directory, an error will be raised. All of this applies exactly the same way for <code>ess_rounds</code>. If <code>only_download = TRUE</code> the format argument will be ignored, as it’s only useful for downloading the data.</p>
</div>
<div id="correcting-for-missing-values" class="section level2">
<h2 class="hasAnchor">
<a href="#correcting-for-missing-values" class="anchor"></a>Correcting for missing values</h2>
<p>Whenever you download the ESS data, it comes together with a script that recodes the values 6 = ‘Not applicable’, 7 = ‘Refusal’, 8 = ‘Don’t know’, 9 = ‘No answer’ and 9 = ‘Not available’ as missings. However, that is the case for variables that have a scaling of 1-5. For variables which have a scaling from 1-10 the corresponding missings are 66, 77, and so on. At first glance new users might not know this and start calculating statistics with these variables such as…</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sp &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ess_country.html">ess_country</a></span>(<span class="st">"Spain"</span>, <span class="dv">1</span>, your_email)
<span class="kw">mean</span>(sp<span class="op">$</span>tvtot)
<span class="co"># 4.622406</span></code></pre></div>
<p>..but that vector contains numbers such as <code>66</code>, <code>77</code>, that shouldn’t be there. <code><a href="../reference/recode_missings.html">recode_missings()</a></code> removes the corresponding missings for numeric variables as well as for character variables. It accepts the complete <code>tibble</code> and recodes all variables that should be recoded.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">new_coding &lt;-<span class="st"> </span><span class="kw"><a href="../reference/recode_missings.html">recode_missings</a></span>(sp)
<span class="kw">mean</span>(new_coding<span class="op">$</span>tvtot)
<span class="co"># 4.527504</span></code></pre></div>
<p>It also gives you the option of recoding only specific categories. For example…</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">other_newcoding &lt;-<span class="st"> </span><span class="kw"><a href="../reference/recode_missings.html">recode_missings</a></span>(sp, <span class="kw">c</span>(<span class="st">"Don't know"</span>, <span class="st">"Refusal"</span>))
<span class="kw">table</span>(other_newcoding<span class="op">$</span>tvpol)
<span class="co">#  0   1   2   3   4   5   6   7  66 </span>
<span class="co"># 167 460 610 252  95  36  26  31  45 </span></code></pre></div>
<p>…still has missing values but recoded the ones that were specified. I strongly suggest the user not to recode these categories as missing without looking at the data as there might be substantial diferences between people who didn’t and who did answer questions. If the user is decided to do so, use <code>recode_missings</code> to recode everything and the corresponding <code>recode_*_missings</code> functions for numeric and character recodings separately. See the documentation of <code><a href="../reference/recode_missings.html">?recode_missings</a></code> for more information.</p>
</div>
<div id="analyzing-ess-data" class="section level2">
<h2 class="hasAnchor">
<a href="#analyzing-ess-data" class="anchor"></a>Analyzing ESS data</h2>
<p>Be aware that for analyzing data from the ESS survey you should take into consideration the sampling and weights of the survey. The <a href="http://r-survey.r-forge.r-project.org/survey/">survey</a> package provides very good support for this. A useful example comes from the work of Anthony Damico and Daniel Oberski <a href="http://asdfree.com/european-social-survey-ess.html">here</a>.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li><a href="#downloading-country-specific-rounds">Downloading country specific rounds</a></li>
      <li><a href="#download-complete-rounds">Download complete rounds</a></li>
      <li><a href="#downloading-data-for-stata-spss-and-sas-users">Downloading data for Stata, SPSS and SAS users</a></li>
      <li><a href="#correcting-for-missing-values">Correcting for missing values</a></li>
      <li><a href="#analyzing-ess-data">Analyzing ESS data</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Jorge Cimentada.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
